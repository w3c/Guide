<!DOCTYPE html>

<html lang="en-US" data-apiary-key="oq0abw4w2bkwcs0k0kws44sok4cg48w" data-apiary-mode="debug">

<head>
  <meta charset="utf-8">
  <title>Onboarding Information for Group Participants</title>
  <meta name="description" content="A group page">
  <meta name="keywords"    content="w3c,w3,w3.org,group,page">
  <meta name="author"      content="W3C">
  <meta name="viewport"    content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="//www.w3.org/favicon.ico">
  <link rel="stylesheet" href="https://www.w3.org/2005/09/table.css">
  <script src="./groupinfo.js"></script>
</head>

<body>

<h1>Onboarding Information for Group Participants</h1>

<table>
<tr>
<th>Homepage</th>
<td data-value="homepage">[Loading…]</td>
</tr>

<tr>
<th>Charter</th>
<td><a data-value="active-charter">[Loading…]</a> (<span data-value='status'>Loading</span>)</td>
</tr>

<tr>
<th>Chair(s)</th>
<td data-value="chairs">[Loading…]</td>
</tr>

<tr>
<th>Team contact(s)</th>
<td data-value="team-contacts">[Loading…]</td>
</tr>
<tr>
    <th>Service(s)</th>
    <td data-value="services">[Loading…]</td>
    </tr>

<tr>
    <th>Participating organization(s)</th>
    <td data-value="participations">[Loading…]</td>
</tr>

<tr>
  <th>Individual(s)</th>
  <td data-value="users">[Loading…]</td>
</tr>

<tr>
    <th>GitHub repo(s)</th>
    <td><dl data-value='repositories'>
      </dl></td>
    </tr>

<tr>
  <th>Specification(s)</th>
  <td><dl data-value="specifications"></dl></td>
</tr>

<tr>
  <th>Calendar</th>
  <td data-value="calendar"></td>
</tr>

</table>

</div>


<hr/>


<h2>General Information on W3C groups</h2>

<h3 id="group_pages">List of the W3C groups</h3>
<ul>
  <li><a href="https://www.w3.org/groups/">Working Groups/Interest Groups</a></li>
  <li><a href="https://www.w3.org/community/groups/">Business Groups/Community Groups</a></li>
</ul>

<h3 id="join_leave_group">How to join/leave the group</h3>
<ul>
  <li><a href="https://www.w3.org/accounts/request">Create your W3C account first</a></li>
  <li>Join W3C groups:
    <ul>
      <li><a href="https://www.w3.org/2004/01/pp-impl/">Working Groups/Interest Groups</a></li>
      <li><a href="https://www.w3.org/community/groups/">Business Groups/Community Groups</a></li>
    </ul>
  </li>
</ul>

<h3 id="emails">Emails</h3>
<ul>
  <li>Email archives:
    <ul>
      <li><a href="https://lists.w3.org/">Public lists</a></li>
      <li><a href="https://lists.w3.org/Archives/Member/">Member lists</a></li>
    </ul>
  </li>
  <li>How to use W3C mailinglists:
    <ul>
      <li><a href="https://www.w3.org/Mail/">Mailing list guide</a></li>
      <li><a href="https://www.w3.org/Mail/Request">Mailinglist subscription</a></li>
    </ul>
  </li>
</ul>

<h3 id="telconfs">Teleconfs</h3>
<ul>
  <li>WebEx:
    <ul>
      <li><a href="https://www.w3.org/2006/tools/wiki/WebExBestPractices">WebEx best practices</a></li>
      <li><a href="https://www.w3.org/2006/tools/wiki/WebExFAQ">WebEx FAQ</a></li>
    </ul>
  </li>
  <li>Minutes taking by IRC:
    <ul>
      <li><a href="https://www.w3.org/Project/IRC/">IRC HOWTO</a></li>
      <li><a href="https://www.w3.org/2001/12/zakim-irc-bot.html">Zakim HOWTO</a></li>
      <li><a href="https://www.w3.org/2002/03/RRSAgent">RRSAGent HOWTO</a></li>
    </ul>
  </li>
 </ul>

<h3 id="meetings">Meetings</h3>
<ul>
  <li><a href="https://www.w3.org/participate/meetings.html">W3C Member meetings</a></li>
  <li><a href="https://www.w3.org/2002/09/TPOverview.html">TPAC (Technical Plenary and Advisory Committee Meetings</a></li>
  <li><a href="https://www.w3.org/Member/Meeting/">AC Meeting (Advisory Committee meeting)</a></li>
  <li>Other group specific f2f meetings: see group pages</li>
</ul>

<h3 id="github">GitHub</h3>
<ul>
  <li>Initial instructions for GitHub beginners:
    <ul>
      <li><a href="https://w3c.github.io/specs.html">W3C Specs on GitHub</a></li>
      <li><a href="https://www.w3.org/2006/tools/wiki/Github">W3C Tools Support Wiki</a></li>
      <li><a href="https://labs.w3.org/echidna/">Echidna (Automatic publication system)</a></li>
    </ul>
  </li>
  <li>Repository Manager:
    <ul>
      <li><a href="https://github.com/w3c/ash-nazg/">Repository Manager page</a></li>
      <li><a href="https://www.w3.org/2017/Talks/0608-ash-nazg-ka/">Kaz's slides for training</a></li>
    </ul>
  </li>
</ul>

<h3 id="w3c_process">W3C Process</h3>
<ul>
  <li><a href="https://github.com/w3c/wg-effectiveness/blob/master/process.md">W3C Process for Busy People</a></li>
  <li><a href="https://www.w3.org/Consortium/Process/">World Wide Web Consortium Process Document (Latest operative version)</a></li>
</ul>

<h3 id="patent_policy">Patent Policy</h3>
<ul>
  <li><a href="https://www.w3.org/Consortium/Patent-Policy/">W3C Patent Policy</a></li>
  <li><a href="https://www.w3.org/2003/12/22-pp-faq.html">Patent Policy FAQ</a></li>
</ul>

<h3 id="learn_more">Learn more</h3>
<ul>
  <li><a href="https://www.w3.org/Guide/">/Guide</a></li>
</ul>

<p>Choose your group from the pull-down menu below and push the "Get Your Group's Info" button:</p>
<p id="groups">[Loading...]</p>
<hr/>

<h2 data-value="name">[Loading…]</h2>

<p data-value="description">[Loading…]</p>



<script>
    function getComponents(query) {
      let elts = document.querySelectorAll(query);
      if ((!elts || !elts.length) && query.indexOf('#') === 0) {
        elts = document.querySelectorAll(`*[data-value="${query.substring(1)}"]`);
      }
      if (!elts || !elts.length) {
        console.warn(`Element ${query} doesn't exist`);
        return [];
      }
      return elts;
    }
    function map(query, data) {
        let elts = getComponents(query);
        if (typeof data === "string") {
          if (data.indexOf('http') === 0) {
            elts.forEach(e => e.href = data);
          } else if (data.indexOf('<') === 0) {
            elts.forEach(e => e.innerHTML = data);
          } else {
            elts.forEach(e => e.textContent = data);
          }
        }
    }
    function renderGroup(group) {
        const format = (ac, c, idx, src) => (ac)? ac + ((idx === src.length-1)? ", and " : ", ") + c : c;
        const individual = (contact) => {
          const cas = contact["connected-accounts"];
          if (cas && cas.length > 0) {
            let gh = cas.filter((ca => ca.service === "github"));
            if (gh.length > 0) {
              return `<a href='${gh[0].href}'>${contact.name}</a>`;
            }
          }
          return `<span>${contact.name}</span>`;
        };
        map("#name", group.name);
        map("#homepage", `<a href="${group.homepage}">${group.homepage}</a>`);
        map("#description", group.description);
        map("#join", group.join);
        map("#details", group.details);
        map("#pp-status", group["pp-status"]);
        group.chairs.then(data => map("#chairs", data.map(c => individual(c)).reduce(format, null)));
        group["team-contacts"].then(data => map("#team-contacts", data.map(c => individual(c)).reduce(format, null)));
        group["active-charter"].then(data => {
          map("#active-charter", data.uri);
          map("#active-charter", `from ${data.start} to ${data.end}`);
        });
        map("#status", (group["is-closed"])? "closed" : "open" );
        group.participations.then(data => map("#participations", data.filter(c => !c.individual).map(c => c.title).reduce(format, null)));
        group["users"].then(data => map("#users", data.map(c => individual(c)).reduce(format)));
        group["specifications"]
        .then(data => data.forEach(spec => {
          const dl = getComponents("#specifications")[0];
          dl.innerHTML = "";
          spec["latest-version"].then(latest => {
            if (latest.status !== "Retired") {
              let dt = document.createElement("dt");
              let dd = document.createElement("dd");
              dt.innerHTML = `<a href='${spec.shortlink}'>${spec.title}</a>`;
              let text = `Status: ${latest.status}`;
              text += `<br>Last update: ${latest.date}`;
              if (spec.milestones) {
                let stones = Object.entries(spec.milestones).map(s => s[0] + " " + s[1]);
                if (stones.length > 0) {
                  text += `<br>Milestones: <a href="${group["dashboard"].href}">`;
                  text += stones.reduce(format);
                  text += "</a>"
                }
              }
              dd.innerHTML = text;
              dl.appendChild(dt);
              dl.appendChild(dd);
            }});
          }));
        map("#calendar", `<a href="${group.homepage}/calendar">${group.homepage}/calendar</a>`);

        group["services"].then (data => {
          const services = getComponents("#services")[0];
          services.innerHTML = "";
          let html = "<dl>";
          data.forEach(service => {
            let linkDesc = service.type;
            if (linkDesc === "other") linkDesc = service.shortdesc;
            html += `<dt><a href="${service.link}">${linkDesc}</a></dt>`;
            if (service.longdesc) {
              html += `<dd>${service.longdesc}</dd>`;
            }
          });
          services.innerHTML = html + "</dl>";
        });
        group["repositories"].then(repos => {
         const dl = getComponents("#repositories")[0];
         dl.innerHTML = "";
         repos.forEach(repo => {
          let dt = document.createElement("dt");
          let dd = document.createElement("dd");
          let link = (repo.homepageUrl)? repo.homepageUrl : `https://${repo.owner.login}.github.io/${repo.name}/`;
          let desc = (repo.description)? repo.description : repo.fullName;
          dt.innerHTML = `<a href="https://github.com/${repo.owner.login}/${repo.name}/"'>${desc}</a> (${repo.w3c["repo-type"]})`;
          let text = "";
          if (repo.homepageUrl) {
            text += `See <a href="${repo.homepageUrl}">homepage</a>`;
          }
          if (repo.issues) {
            let openIssues = repo.issues.filter(i => i.state === "open" && !i.isPullRequest);
            let openPRs = repo.issues.filter(i => i.state === "open" && i.isPullRequest);
            if (text.length > 0) text += "<br>";
            text += `<a href="https://github.com/${repo.owner.login}/${repo.name}/issues">`
                + `${openIssues.length} `
                + `issues</a>, <a href="https://github.com/${repo.owner.login}/${repo.name}/pull">`
                + `${openPRs.length} `
                + "PRs</a>"

          }
          dd.innerHTML = text;
          dl.appendChild(dt);
          dl.appendChild(dd);
         });
        });
      }

      let config = {};

      // groupInfo(GROUPID).then(_renderGroup).catch(console.error)
      putGrInfo = function(idname) {
        let obj = document.getElementById(idname);
        let gid = obj.value;
        config.gid = gid;
        /* add gid to the URL display of the browser */
        history.pushState(config, gid, "?gid=" + gid);

        groupInfo(gid).then(renderGroup).catch(console.error);
      };

      getGroups().then(groups => {
        let content = '<form><select id="grlist">';
        content +=
         groups.filter(g => g.type === "working group")
               .map(g => `<option value="${g.id}">${g.name}</option>`).join('');
        content += '</select>';
        content += '<input type="button" value="Get Your Group\'s Info" onclick="putGrInfo(\'grlist\');" />';
        content += '</form>';
        document.getElementById("groups").innerHTML = content;
        return groups;
      }).catch(console.error);

      (function () {
        let gid = (new URL(document.location)).searchParams.get("gid");
        if (gid) {
          config.gid = gid;
          groupInfo(gid).then(renderGroup).catch(console.error);
        }
      })();
      // browser back and forward buttons
      window.onpopstate = function (e) {
        if (!e.state) return; // #fragid navigation
        config = e.state;
        if (config.gid) {
          groupInfo(config.gid).then(renderGroup).catch(console.error);
        }
      }

</script>

      </body>

</html>
